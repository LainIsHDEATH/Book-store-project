<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<div th:replace="layout :: content">
    <h1>My Orders</h1>

    <div th:each="o : ${orders.content}">
        <div>
            <b>#</b><span th:text="${o.id}"></span>
            • <span th:text="${o.status}"></span>
            • <span th:text="${o.totalAmount}"></span>
            • <span th:text="${o.createdAt}"></span>
        </div>

        <ul>
            <li th:each="i : ${o.items}">
                <span th:text="${#locale.language == 'uk' ? i.book.nameUa : i.book.nameEn}"></span>
                x <span th:text="${i.qty}"></span>
            </li>
        </ul>

        <form th:if="${o.status.name() != 'CANCELED'}" th:action="@{'/orders/' + ${o.id} + '/cancel'}" method="post">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            <button type="submit">Cancel</button>
        </form>

        <hr/>
    </div>
</div>
</body>
</html>