<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<body>
<nav th:fragment="topbar" style="background:#1f2327;color:#fff;padding:10px 14px;display:flex;gap:14px;align-items:center;">
    <a th:href="@{/}" style="color:#fff;text-decoration:none;font-weight:700;">Книжкова Лавка</a>

    <!-- ADMIN -->
    <a sec:authorize="hasRole('ADMIN')" th:href="@{/admin/employees}"
       style="color:#ffd54f;text-decoration:none;">Manage employees</a>

    <!-- EMPLOYEE -->
    <a sec:authorize="hasAnyRole('EMPLOYEE','ADMIN')" th:href="@{/employee/orders}"
       style="color:#ffd54f;text-decoration:none;">Керування замовленнями</a>

    <a sec:authorize="hasAnyRole('EMPLOYEE','ADMIN')" th:href="@{/employee/books}"
       style="color:#ffd54f;text-decoration:none;">Керування книгами</a>

    <a sec:authorize="hasAnyRole('EMPLOYEE','ADMIN')" th:href="@{/employee/clients}"
       style="color:#ffd54f;text-decoration:none;">Клієнти</a>

    <!-- CLIENT -->
    <a sec:authorize="hasRole('CLIENT')" th:href="@{/client/orders}"
       style="color:#ffd54f;text-decoration:none;">Мої замовлення</a>

    <span sec:authorize="hasRole('CLIENT')" style="margin-left:auto;color:#cfd8dc;">
    Баланс: <b th:text="${clientBalance}">0.00</b>
  </span>

    <!-- Языки -->
    <div style="margin-left:auto;display:flex;gap:8px;align-items:center;">
        <a th:href="@{__${#httpServletRequest.requestURI}__(lang='en')}" style="color:#fff;text-decoration:none;">EN</a>
        <a th:href="@{__${#httpServletRequest.requestURI}__(lang='uk')}" style="color:#fff;text-decoration:none;">UA</a>
    </div>

    <!-- Пользователь / Login / Logout -->
    <div sec:authorize="isAuthenticated()" style="display:flex;gap:10px;align-items:center;">
        <span style="color:#cfd8dc;" th:text="${#authentication.name}">user@email</span>
        <form th:action="@{/auth/logout}" method="post" style="margin:0;">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            <button type="submit" style="background:#2b3137;color:#fff;border:1px solid #3a424a;border-radius:6px;padding:6px 10px;cursor:pointer;">
                Вихід
            </button>
        </form>
    </div>

    <div sec:authorize="!isAuthenticated()">
        <a th:href="@{/auth/login}" style="color:#fff;text-decoration:none;">Вхід</a>
    </div>
</nav>
</body>
</html>